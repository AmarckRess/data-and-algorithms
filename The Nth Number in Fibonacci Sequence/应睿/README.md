# The Nth Number in Fibonacci Sequence

![Score](score.png)

## 主要思路

通过斐波那契数列的递推式，得到

``` text
[ f(n) ] = [1 1]^(n-2) * [f(2)]
[f(n-1)]   [1 0]         [f(1)]

Q = [1 1]
    [1 0]
```

问题变为求解矩阵的乘方运算。

## 矩阵乘方的一种方法

将指数化成2的幂的和，如：

``` text
19 = 16 + 2 + 1
   = 1 * 2^4 + 0 * 2^3 + 0 * 2^2 + 1 * 2^1 + 1 * 2^0
```

本质上就是将十进制的指数化为二进制，代码的处理也与转换二进制的短除法类似。

将指数进行短除，每次除以2都令Q自身平方来获得2的幂次方的矩阵乘方x。若余数为0，表明这一次的2的幂次方的矩阵乘方x不会参与运算，于是不进行其他操作；若余数为1，表明这一次2的幂次方的矩阵乘方x要被乘到答案y中。短除结束，y即为满足条件的矩阵乘方结果。

## 优化

对于过大的数，题目要求我们取模，输出余数。但是在矩阵乘法过程中，数据不可避免会变大。为了不扩大数据规模，在每次乘法中都提前取模，最终结果再取模。